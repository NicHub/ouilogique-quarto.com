<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nico">

<title>Neopixel Didel WS2813 – ouilogique.com</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
          <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text"><i class="fa-regular fa-house" aria-label="house"></i></span></a>
  </li>  
</ul>
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Neopixel Didel WS2813</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Auteur·rice</div>
    <div class="quarto-title-meta-contents">
             <p>Nico </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Date de publication</div>
    <div class="quarto-title-meta-contents">
      <p class="date">27 avril 2017</p>
    </div>
  </div>
  
    
  </div>
  

</header>


<section id="projet" class="level2">
<h2 class="anchored" data-anchor-id="projet">Projet</h2>
<p>Test d’un strip de 2 LED que <a href="http://www.didel.com/NewsF.html">Didel</a> m’a gracieusement offert.</p>
<p>On peut l’acheter chez Boxtec et dans ce cas, il a 11&nbsp;LED adressables WS2813. <a href="http://shop.boxtec.ch/didel-neopixel-stickbreakout-ws2813-p-42819.html" rel="nofollow">http://shop.boxtec.ch/didel-neopixel-stickbreakout-ws2813-p-42819.html</a></p>
<p>Il y a un guide utilisateur ici&nbsp;: <a href="http://cdn2.boxtec.ch/pub/didel/WS2813MiniStrip.pdf" rel="nofollow">http://cdn2.boxtec.ch/pub/didel/WS2813MiniStrip.pdf</a></p>
<p>Et la spécification des LED WS2813 se trouve ici&nbsp;: <a href="http://cdn2.boxtec.ch/pub/diverse/WS2813.pdf" rel="nofollow">http://cdn2.boxtec.ch/pub/diverse/WS2813.pdf</a></p>
<p>Didel propose des exemples de programme pour Arduino <a href="http://didel.com/WS28.zip" rel="nofollow">http://didel.com/WS28.zip</a> et c’est eux que j’ai testés.</p>
</section>
<section id="brochage" class="level2">
<h2 class="anchored" data-anchor-id="brochage">Brochage</h2>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Neopixel Didel</th>
<th style="text-align: center;">Arduino Nano</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">-</td>
<td style="text-align: center;">GND</td>
</tr>
<tr class="even">
<td style="text-align: center;">+</td>
<td style="text-align: center;">5V ¹</td>
</tr>
<tr class="odd">
<td style="text-align: center;">d</td>
<td style="text-align: center;">A0 ²</td>
</tr>
<tr class="even">
<td style="text-align: center;">b</td>
<td style="text-align: center;">NC</td>
</tr>
</tbody>
</table>
<p>¹ <del>Utiliser une résistance de 220&nbsp;Ω à 1&nbsp;kΩ pour limiter le courant.</del> Faux&nbsp;! Voir <a href="#édit-de-février-mars-2018">l’édition de février-mars 2018 ci-dessous</a>. ² <code>A0</code> est utilisé par défaut dans les programmes de Didel, mais n’importe quel GPIO peut être utilisé.</p>
</section>
<section id="notes" class="level2">
<h2 class="anchored" data-anchor-id="notes">Notes</h2>
<p>On peut aussi alimenter ce strip en 3.3&nbsp;V.</p>
<p>Les programmes de Didel sont optimisés pour être aussi compacts que possible et tiennent sans problèmes sur un ATtiny.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Programme</th>
<th style="text-align: center;">Taille programme</th>
<th style="text-align: center;">Taille variables globales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">WS28First.ino</td>
<td style="text-align: center;">812 o (2%)</td>
<td style="text-align: center;">9 o (0%)</td>
</tr>
<tr class="even">
<td style="text-align: center;">RGBvsLogRGB.ino</td>
<td style="text-align: center;">886 o (2%)</td>
<td style="text-align: center;">42 o (2%)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Huetest.ino</td>
<td style="text-align: center;">1264 o (4%)</td>
<td style="text-align: center;">23 o (1%)</td>
</tr>
</tbody>
</table>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./images/2017-04-27-neopixel-didel-ws2813-001.jpg" class="lightbox" title="Neopixel Didel WS2813" data-gallery="quarto-lightbox-gallery-1"><img src="./images/2017-04-27-neopixel-didel-ws2813-001.jpg" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Neopixel Didel WS2813</figcaption>
</figure>
</div>
</section>
<section id="édit-de-février-mars-2018" class="level2">
<h2 class="anchored" data-anchor-id="édit-de-février-mars-2018">Édit de février-mars 2018</h2>
<p>J’ai refait des tests avec ces LED pour évaluer leur luminosité et je me suis rendu compte que j’avais fait une grosse bourde&nbsp;: il ne faut pas utiliser de résistance de limitation de courant&nbsp;!</p>
<p>Dans la foulée, j’ai aussi essayé de les alimenter de deux façons différentes&nbsp;:</p>
<ul>
<li>Avec l’Arduino Nano.</li>
<li>Avec une alimentation externe 5&nbsp;V.</li>
</ul>
<blockquote class="blockquote">
<p>Résultat des courses&nbsp;: l’intensité lumineuse est identique dans les deux cas.</p>
</blockquote>
<p>Le programme de test se trouve <a href="https://github.com/NicHub/ouilogique-Arduino/tree/master/neopixel-didel-ws2813">sur mon GitHub</a>.</p>
<p><strong>Alimentation avec l’Arduino Nano</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./images/2017-04-27-neopixel-didel-ws2813-002.jpg" class="lightbox" title="Neopixel Didel WS2813 alimentée par l’Arduino Nano" data-gallery="quarto-lightbox-gallery-2"><img src="./images/2017-04-27-neopixel-didel-ws2813-002.jpg" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Neopixel Didel WS2813 alimentée par l’Arduino Nano</figcaption>
</figure>
</div>
<p><strong>Alimentation avec une source externe 5&nbsp;V</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./images/2017-04-27-neopixel-didel-ws2813-003.jpg" class="lightbox" title="Neopixel Didel WS2813 alimentée par une source externe 5&nbsp;V" data-gallery="quarto-lightbox-gallery-3"><img src="./images/2017-04-27-neopixel-didel-ws2813-003.jpg" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Neopixel Didel WS2813 alimentée par une source externe 5&nbsp;V</figcaption>
</figure>
</div>
</section>
<section id="test-avec-un-raspberry-pi" class="level2">
<h2 class="anchored" data-anchor-id="test-avec-un-raspberry-pi">Test avec un Raspberry Pi</h2>
<p>J’ai aussi fait un test avec un Raspberry Pi pour voir s’il est possible de faire fonctionner des LED adressables lorsque le processeur du RPi est utilisé au maximum de sa capacité.</p>
<p>Pour les LED, j’ai utilisé <a href="https://learn.adafruit.com/neopixels-on-raspberry-pi?view=all">la solution logicielle proposée par Adafruit</a>.</p>
<p>Pour le stress-test, j’ai utilisé <a href="https://core-electronics.com.au/tutorials/stress-testing-your-raspberry-pi.html"><code>vcgencmd</code></a>.</p>
<p>Pour convertir le 3.3&nbsp;V en 5&nbsp;V, j’ai utilisé un <em>Logic Level Converter</em> bidirectionnel.</p>
<p>La broche de données est la 18.</p>
<blockquote class="blockquote">
<p>Résultat du test&nbsp;: ça fonctionne parfaitement. Le RPi peut sans problème être utilisé à 100&nbsp;% de sa capacité et en même temps piloter les deux LED. Peut-être que ça sera plus dur avec plus de LED… à voir.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./images/2017-04-27-neopixel-didel-ws2813-004.jpg" class="lightbox" title="Neopixel Didel WS2813 avec un Raspberry Pi" data-gallery="quarto-lightbox-gallery-4"><img src="./images/2017-04-27-neopixel-didel-ws2813-004.jpg" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Neopixel Didel WS2813 avec un Raspberry Pi</figcaption>
</figure>
</div>
</section>
<section id="voir-aussi" class="level2">
<h2 class="anchored" data-anchor-id="voir-aussi">Voir aussi</h2>
<ul>
<li><a href="https://ouilogique.com/leds_adressables/">LED adressable P9823-F8</a></li>
<li><a href="./docs/RGBstrips.pdf">RGBstrips.pdf</a></li>
</ul>


</section>

<p>© ouilogique.com</p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../index.html"><i class="fa-regular fa-house" aria-label="house"></i></a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script src="../../js/file_list.js"></script>
<script src="../../js/prev_next_buttons.js"></script>
<script src="../../js/target_blank.js"></script>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","loop":true,"descPosition":"bottom","openEffect":"zoom"});</script>




</body></html>